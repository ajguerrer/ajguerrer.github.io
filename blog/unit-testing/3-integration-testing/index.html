<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>Part 3: Integration Testing</title>
    <meta name="description" content="">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dosis&display=swap" rel="stylesheet">
    <link rel="preload" href="https://ajguerrer.github.io/fonts/iosevka-regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous">
    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script>
    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/var.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/header.css" />
<link rel="stylesheet" href="/css/footer.css" />
<link rel="stylesheet" href="/css/post.css" />
    
</head>

<body>
    <script>if(localStorage.getItem('theme')=='dark'){document.body.classList.add('dark-mode');}</script>
    
<header >
    <div class="top">
        <a class="header blog" href="/blog"><i class="ri-open-arm-line ri-2x"></i><span>Blog</span></a>
        <a class="back" href="/"><i class="ri-arrow-left-s-line ri-1x"></i><span>Home</span></a>
        <div class="icon">
            <a id="go-home" href="/" aria-label="home" ><i class="ri-home-4-line ri-xl"></i></a>
            <a href="/blog/feed.xml" aria-label="rss feed" ><i class="ri-rss-line ri-xl"></i></a>
            <button id="color-toggle" aria-label="dark light mode switch"><i class="ri-moon-line ri-xl"></i></button>
            <button id="toc-toggle" aria-label="table of content"><i class="ri-menu-2-line ri-xl"></i></button>
            </div>
    </div>
    <div id="progress-bar"></div>
</header>

<div class="wrap">
  <div class="blank"></div>
  <main>
    <div id="top"></div>
    <article>
      <h1>Part 3: Integration Testing</h1>
      <div id="post-info">
        <div class="date">
          <span id="publish">2020-01-06</span>
          </div>
        <div class="tags">
          <a class="tag" href="https://ajguerrer.github.io/tags/testing"><i
              class="ri-hashtag ri-sm"></i><span>testing</span></a><a class="tag" href="https://ajguerrer.github.io/tags/unit-testing"><i
              class="ri-hashtag ri-sm"></i><span>unit-testing</span></a>
        </div>
      </div>    

      

      <h2 id="role-of-integration-tests">Role of Integration Tests</h2>
<p>Integration tests are medium sized tests that verify:</p>
<ul>
<li>Interactions with external dependencies.</li>
<li>Edge cases with resource costs unsuitable for a unit test.</li>
</ul>
<p>Each integration test should choose a happy path that exercises as many shared external dependencies 
as possible while staying within a single use case. If a single integration test doesn't cover all 
shared external dependencies, write more until all external dependencies are covered.</p>
<blockquote class="note tip">
    <div class="header">
        <i class="ri-lightbulb-line ri-lg"></i>
        
        <p><strong>Tip</strong></p>
        
    </div> 
    <div class="content">
        <p>To keep maintenance costs low, check as many edge cases as possible with unit tests before resorting 
to an integration test.</p>

    </div>
</blockquote><blockquote class="note info">
    <div class="header">
        <i class="ri-information-line ri-lg"></i>
        
        <p><strong>Info</strong></p>
        
    </div> 
    <div class="content">
        <p>Edge cases that can be checked before starting an operation and changing state, such as
preconditions, adhere to the <em>Fail Fast principle</em> and don't require an integration test.</p>

    </div>
</blockquote>
<p>While unit tests are great for testing domain logic, integration tests are great for testing 
controllers.</p>
<div class="svg-content">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="593px" height="472px" viewBox="-0.5 -0.5 593 472">
  <g>
    <rect x="63" y="88" width="220" height="160" class="outline-text" stroke-width="3" pointer-events="all" />
    <rect x="63" y="248" width="220" height="160" class="outline-text" stroke-width="3" pointer-events="all" />
    <rect x="283" y="88" width="220" height="160" class="outline-text" stroke-width="3" pointer-events="all" />
    <rect x="283" y="248" width="220" height="160" class="outline-text" stroke-width="3" pointer-events="all" />
    <path d="M 63 408 L 572.9 408" class="outline-text" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" />
    <path d="M 63 408 L 63 18.1" class="outline-text" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" />
    <path d="M 579.65 408 L 570.65 412.5 L 572.9 408 L 570.65 403.5 Z" class="solid-text" stroke-width="3" stroke-miterlimit="10" pointer-events="all" />
    <path d="M 63 11.35 L 67.5 20.35 L 63 18.1 L 58.5 20.35 Z" class="solid-text" stroke-width="3" stroke-miterlimit="10" pointer-events="all" />
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 328px; margin-left: 284px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 28px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
            <font style="font-size: 28px">
              Controller layer
              <br />
              -
              <br />
              Integration test
            </font>
          </div>
        </div>
      </div>
    </foreignObject>
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 168px; margin-left: 64px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 28px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
            <font style="font-size: 28px">
              Domain layer
              <br />
              -
              <br />
              Unit test
            </font>
          </div>
        </div>
      </div>
    </foreignObject>
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 328px; margin-left: 64px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 28px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
            <font style="font-size: 28px">
              Trivial code
              <br />
              -
              <br />
              Don't test
            </font>
          </div>
        </div>
      </div>
    </foreignObject>
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 168px; margin-left: 284px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 28px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
            <font style="font-size: 28px">
              Overcomplicated Code
              <br />
              -
              <br />
              Avoid writing
            </font>
          </div>
        </div>
      </div>
    </foreignObject>
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 438px; margin-left: 134px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 28px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Number of collaborators</div>
        </div>
      </div>
    </foreignObject>
    <g transform="rotate(-90 33 238)">
      <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
        <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 238px; margin-left: -116px;">
          <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
            <div style="display: inline-block; font-size: 28px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Control flow complexity</div>
          </div>
        </div>
      </foreignObject>
    </g>
  </g>
  <switch>
    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" />
    <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
      <text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text>
    </a>
  </switch>
</svg>
</div>
<h4 id="interfaces">Interfaces</h4>
<p>Genuine abstractions are <em>discovered</em>, not <em>invented</em>. For an interface to be genuine, it must have 
at least two implementations. Otherwise, the the added cognitive complexity isn't worth it.</p>
<p>Interfaces enable mocking. Write an interface to mock shared external dependencies. 
However, not all external dependencies need an interface. Private external dependencies 
don't need mocks and therefore don't benefit from an interface, unless there is a need to be to swap
them with another implementation in production.</p>
<h4 id="layering">Layering</h4>
<p>Adding layers of indirection where they are not appropriate makes code hard to reason with. Aim
to have as few layers as possible. Most applications only need three layers: Domain, Controller, and 
Infrastructure. The Domain and Controller Layers are already familiar. The Infrastructure Layer
provides utility libraries such as logging and networking.</p>
<div class="svg-content">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="502px" height="212px" viewBox="-0.5 -0.5 502 212">
  <g>
    <rect x="270" y="50" width="20" height="160" rx="3" ry="3" class="background-fill-outline-text" stroke-width="3" pointer-events="all" />
    <rect x="330" y="50" width="20" height="160" rx="3" ry="3" class="background-fill-outline-text" stroke-width="3" pointer-events="all" />
    <rect x="390" y="50" width="20" height="160" rx="3" ry="3" class="background-fill-outline-text" stroke-width="3" pointer-events="all" />
    <path d="M 180 165 Q 180 165 209.9 165" class="outline-text" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" />
    <path d="M 216.65 165 L 207.65 169.5 L 209.9 165 L 207.65 160.5 Z" class="solid-text" stroke-width="3" stroke-miterlimit="10" pointer-events="all" />
    <rect x="10" y="70" width="170" height="120" rx="18" ry="18" class="outline-text" stroke-width="3" pointer-events="all" />
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 130px; margin-left: 11px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 12px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
            <span style="font-size: 28px ; white-space: normal">Infrastructure Layer</span>
          </div>
        </div>
      </div>
    </foreignObject>
    <rect x="220" y="140" width="240" height="50" rx="7.5" ry="7.5" class="background-fill-outline-text" stroke-width="3" pointer-events="all" />
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 165px; margin-left: 221px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 12px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
            <span style="font-size: 28px ; white-space: normal">Domain Layer</span>
          </div>
        </div>
      </div>
    </foreignObject>
    <path d="M 220 95 Q 220 95 190.8 95" class="outline-text" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" />
    <path d="M 184.05 95 L 193.05 90.5 L 190.8 95 L 193.05 99.5 Z" class="solid-text" stroke-width="3" stroke-miterlimit="10" pointer-events="all" />
    <path d="M 460 95 Q 500 95 500 130 Q 500 165 470.1 165" class="outline-text" stroke-width="3" stroke-miterlimit="10" pointer-events="stroke" />
    <path d="M 463.35 165 L 472.35 160.5 L 470.1 165 L 472.35 169.5 Z" class="solid-text" stroke-width="3" stroke-miterlimit="10" pointer-events="all" />
    <rect x="220" y="70" width="240" height="50" rx="7.5" ry="7.5" class="background-fill-outline-text" stroke-width="3" pointer-events="all" />
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 95px; margin-left: 221px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 12px; line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
            <span style="font-size: 28px ; white-space: normal">Controller Layer</span>
          </div>
        </div>
      </div>
    </foreignObject>
    <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
      <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 20px; margin-left: 340px;">
        <div style="box-sizing: border-box; font-size: 0px; text-align: center;">
          <div style="display: inline-block; font-size: 28px; line-height: 1.2; pointer-events: all; white-space: nowrap;">Use cases</div>
        </div>
      </div>
    </foreignObject>
  </g>
  <switch>
    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" />
    <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
      <text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text>
    </a>
  </switch>
</svg>
</div>
<h4 id="logging">Logging</h4>
<p>Logging falls under two categories:</p>
<ul>
<li><strong>Support logging</strong> - messages are intended to be consumed by support staff and system admins; 
observable behavior.</li>
<li><strong>Diagnostic logging</strong> - messages are intended to be consumed by developers; implementation 
detail.</li>
</ul>
<p>Since <em>Support</em> logging is observable behavior, it is worth the testing effort. <em>Diagnostic</em> 
logging, however, is an implementation detail and isn't worth testing.</p>
<blockquote class="note tip">
    <div class="header">
        <i class="ri-lightbulb-line ri-lg"></i>
        
        <p><strong>Tip</strong></p>
        
    </div> 
    <div class="content">
        <p>The Domain layer should not have dependencies, including loggers. The Controller layer may inject a 
logger, or the Domain layer may emit a log event.</p>

    </div>
</blockquote>
<p>Effective logging maximizes the signal to noise ratio. <em>Support</em> logging cannot be controlled 
because its a business requirement, but <em>Diagnostic</em> logging can. Minimize diagnostic logging
in the Domain layer, only adding it for debugging and then subsequently removing it once finished.</p>
<h2 id="mocking-best-practices">Mocking Best Practices</h2>
<ul>
<li><strong>Mocks are for integration tests only</strong> - Mentioned in 
<a href="/unit-testing/making_tests_work/#hexagonal-architecture">Hexagonal Architecture</a>, only shared 
external dependencies should be mocked. Unit tests target the Domain layer which shouldn't
communicate with external dependencies.</li>
<li><strong>Never mock private external dependencies</strong> - When a private external dependency is too 
difficult or prohibitive to setup, don't try to mock it out. If that dependency cannot be tested 
as-is, it defeats the point of integration testing and should not be tested at all.</li>
<li><strong>Mock the furthest edges of the system</strong> - Mock the type that directly communicates with a 
shared dependency, not the wrapper. Verify the message sent to a shared dependency, not a call
to a class you wrote. Doing so maximizes resistance against regressions.</li>
<li><strong>Use as many mocks as necessary per test</strong> -  One mock per test is a common misconception. It's 
irrelevant how many mocks it takes to verify one unit of behavior. The number of mocks depends
solely on the number of shared external dependencies participating in the unit of behavior.</li>
<li><strong>Verify the absence of unexpected messages too</strong> - It is not enough to verify your system is 
sending the correct messages to shared external dependencies, unexpected messages are a
source of bugs too.</li>
<li><strong>Mock only the types you own</strong> - If your using a third party library to communicate with a shared
external dependency, write a adapter for it and mock the adapter instead. Third-party 
libraries have arcane inner workings, so it's futile to try to emulate their behavior.</li>
</ul>
<h2 id="testing-the-database">Testing the Database</h2>
<h4 id="setup">Setup</h4>
<p>Be able to build your database from a series of migration scripts checked into source control. This 
includes tables, views, indexes, stored procedures, reference data and anything else critical to 
run the database in production.</p>
<blockquote class="note info">
    <div class="header">
        <i class="ri-information-line ri-lg"></i>
        
        <p><strong>Info</strong></p>
        
    </div> 
    <div class="content">
        <p><em>Reference data</em> is data that is necessary for the application to run, but isn't actively modified 
by the application.</p>

    </div>
</blockquote>
<p>Migration scripts should be used in both testing and production. Once committed to source control,
don't modify them. Make a new migration script instead of fixing the old one, unless fixing the old
one prevents data loss.</p>
<h4 id="transactions">Transactions</h4>
<p>Transactions are capable of updating sets of data within the same business operation atomically. 
When transactions are involved, applications need to make two separate types of decisions:</p>
<ol>
<li>Which data gets updated to what?</li>
<li>Should a set of updates be kept or rolled back?</li>
</ol>
<p>These decisions should be separated into two different responsibilities:</p>
<ul>
<li><strong>Repositories</strong> - Can access and modify database data; lifetime lasts the duration of the query.</li>
<li><strong>Transactions</strong> - Commits or rolls back a set of updates in full; lifetime lasts the duration of
the business operation.</li>
</ul>
<blockquote class="note info">
    <div class="header">
        <i class="ri-information-line ri-lg"></i>
        
        <p><strong>Info</strong></p>
        
    </div> 
    <div class="content">
        <p>Non-relational databases lack transactions. Instead, updates to the document are atomic. Related 
data should be placed in the same document so that updates don't span more than one document.</p>

    </div>
</blockquote>
<p>To replicate the production environment as closely as possible, integration tests should wrap the 
<em>act</em> section in a separate transaction from the <em>arrange</em> and <em>assert</em> sections.</p>
<h4 id="cleanup">Cleanup</h4>
<p>There are many ways to cleanup a database between tests:</p>
<ul>
<li><strong>Restore a backup database before each test</strong> - Works, but is slow.</li>
<li><strong>Cleanup data at the end of the test</strong> - Might be skipped when test fails.</li>
<li><strong>Wrap each test in a transaction and then don't commit</strong> - Makes behavior between production and 
testing inconsistent.</li>
<li><strong>Cleanup data at the beginning of the test</strong> - Fast, consistent, and won't get skipped.</li>
</ul>
<h4 id="best-practices">Best Practices</h4>
<ul>
<li><strong>Avoid in-memory databases</strong> - Behavior between production and testing should be consistent.</li>
<li><strong>Reuse code in test sections</strong> - <em>Arrange</em> with factory or builder pattern, <em>act</em> with decorator
pattern, and <em>assert</em> with handmade mocks (a.k.a. Spys).</li>
<li><strong>Skip trivial database read tests</strong> - Writes are always important because the alter the state of
the database. Reads that important or complex should be tested; disregard the rest.</li>
<li><strong>Don't test repositories directly</strong> - Repositories are a controller, so they shouldn't be 
complex. The point of an integration test is to cover shared, external dependencies, not 
controllers.</li>
</ul>

      
      <!-- I could not get page.lighter and page.heavier to work, so lets do it the hard way -->

      <!-- find the current section by searching subsections for a matching page -->
      
      
        
        
          
            
          
        
          
        
          
        
          
        
      
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
        
        
          
        
          
        
          
        
      

      <!-- initially a bool, if found gets set to a page -->
      
      
      
      <!-- iterate pages from lightest to heaviest -->
      
        
          
        
      
        
          
          <!-- break so we don't set previous to something even heavier -->
          

      <div class="next-previous">
              
        <div class="spacer"></div>
        
          <a href="https:&#x2F;&#x2F;ajguerrer.github.io&#x2F;blog&#x2F;unit-testing&#x2F;4-antipatterns&#x2F;"><i class="ri-arrow-right-s-line ri-4x"></i></a>
        
      </div>
    </article>
  </main>
  <aside >  
    <nav>
      <ul>
        <li>
          <a class="toc-h2" href="#role-of-integration-tests">Role of Integration Tests</a>
          <ul>
            <li>
              <a class="toc-h3" href="#interfaces">Interfaces</a>
            </li>
            <li>
              <a class="toc-h3" href="#layering">Layering</a>
            </li>
            <li>
              <a class="toc-h3" href="#logging">Logging</a>
            </li>
          </ul>
        </li>
        <li>
          <a class="toc-h2" href="#mocking-best-practices">Mocking Best Practices</a>
        </li>
        <li>
          <a class="toc-h2" href="#testing-the-database">Testing the Database</a>
          <ul>
            <li>
              <a class="toc-h3" href="#setup">Setup</a>
            </li>
            <li>
              <a class="toc-h3" href="#transactions">Transactions</a>
            </li>
            <li>
              <a class="toc-h3" href="#cleanup">Cleanup</a>
            </li>
            <li>
              <a class="toc-h3" href="#best-practices">Best Practices</a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </aside>
</div>
<footer>
    <div class="copyright">
        Andrew Guerrero
    </div>
    <div class="credits">
        <span>Powered by <a href="https://www.getzola.org/" target="_blank" rel='noreferrer noopener'>Zola</a> and <a href="https://github.com/isunjn/serene" target="_blank" rel='noreferrer noopener'>Serene</a></span>
    </div>
</footer>
<script src="/js/dark.js"></script>    
<script src="/js/toc.js"></script>
<script src="/js/progress.js"></script>
<script src="/js/lightense.min.js"></script>
<script src="/js/img.js"></script>
</body>

</html>